version: 2
updates:
  # ==============================================================================
  # 1. CI/CD WORKFLOWS
  # ==============================================================================
  - package-ecosystem: "github-actions"
    directory: "/"
    schedule:
      interval: "weekly"
    groups:
      github-actions:
        patterns:
          - "*"

  # ==============================================================================
  # 2. BACKEND SERVICES (MAVEN)
  # ==============================================================================

  # --- Antares Auth ---
  - package-ecosystem: "maven"
    directory: "/antares-auth"
    schedule:
      interval: "weekly"
    open-pull-requests-limit: 5
    groups:
      spring-boot:
        patterns:
          - "org.springframework.boot:*"
      apache-commons:
        patterns:
          - "org.apache.commons:*"

  # --- Aldebaran Training ---
  - package-ecosystem: "maven"
    directory: "/aldebaran-training"
    schedule:
      interval: "weekly"
    open-pull-requests-limit: 5
    groups:
      spring-boot:
        patterns:
          - "org.springframework.boot:*"

  # --- Vega Admin ---
  - package-ecosystem: "maven"
    directory: "/vega-admin"
    schedule:
      interval: "weekly"
    open-pull-requests-limit: 5
  #    groups:
  #      spring-boot: # Ajout du groupement pour Vega aussi
  #        patterns:
  #          - "org.springframework.boot:*"

  # --- Bellatrix Swagger ---
  - package-ecosystem: "maven"
    directory: "/bellatrix-swagger"
    schedule:
      interval: "weekly"
    open-pull-requests-limit: 5
    groups:
      spring-boot:
        patterns:
          - "org.springframework.boot:*"

  # ==============================================================================
  # 3. FRONTEND (NPM)
  # ==============================================================================

  # --- Sirius App ---
  - package-ecosystem: "npm"
    directory: "/sirius-app"
    schedule:
      interval: "weekly"
    open-pull-requests-limit: 5
    groups:
      angular-framework:
        patterns:
          - "@angular/*"
          - "@angular-devkit/*"
          - "typescript"
          - "rxjs"

  # ==============================================================================
  # 4. DOCKER IMAGES (BASE IMAGES)
  # ==============================================================================

  # --- Antares Auth ---
  - package-ecosystem: "docker"
    directory: "/antares-auth"
    schedule:
      interval: "weekly"
    open-pull-requests-limit: 3

  # --- Aldebaran Training ---
  - package-ecosystem: "docker"
    directory: "/aldebaran-training"
    schedule:
      interval: "weekly"
    open-pull-requests-limit: 3

  # --- Vega Admin ---
  - package-ecosystem: "docker"
    directory: "/vega-admin"
    schedule:
      interval: "weekly"
    open-pull-requests-limit: 3

  # --- Bellatrix Swagger ---
  - package-ecosystem: "docker"
    directory: "/bellatrix-swagger"
    schedule:
      interval: "weekly"
    open-pull-requests-limit: 3

  # --- Sirius App ---
  - package-ecosystem: "docker"
    directory: "/sirius-app"
    schedule:
      interval: "weekly"
    open-pull-requests-limit: 3